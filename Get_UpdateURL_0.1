// ==UserScript==
// @name        Get UpdateURL ğŸ”µ
// @namespace        http://tampermonkey.net/
// @version        0.1
// @description        è‡ªå‹•æ›´æ–°ç”¨ã®URLãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
// @author        personwritep
// @match        https://github.com/personwritep/*
// @icon        https://www.google.com/s2/favicons?sz=64&domain=github.com
// @grant        none
// ==/UserScript==


window.addEventListener('keydown', check_key);
function check_key(event){
    if(event.keyCode==121){ // ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã€ŒF10ã€
        event.preventDefault();
        event.stopImmediatePropagation();
        make_mata(); }}


function make_mata(){
    let now_url=location.href;
    let all_part=now_url.split('/');

    let meta_url;
    if(all_part.length==8){
        all_part[5]='raw';
        all_part[7]=all_part[4]+'.user.js';

        meta_url=all_part.join('/');

        let add_meta_url=
            '// @updateURL        '+ meta_url +'\n'+
            '// @downloadURL        '+ meta_url;


        if (navigator.clipboard && add_meta_url){ // copyToClipboardã‚’å®Ÿè¡Œ
            navigator.clipboard.writeText(add_meta_url);

            alert("ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã€ŒUpdate URLã€ã‚’ç”Ÿæˆä¿å­˜ã—ã¾ã—ãŸ"); }
    }}
